#!/bin/python3

import os
import socket
import sys

def main():
	try:
		if len(sys.argv) == 2:
			target = socket.gethostbyname(sys.argv[1])
		else:
			print("\nUsage: NetEnum.py <ip>")
			sys.exit()

		print()
		print("*" * 70)
		print("NetEnum running on {} against all ports".format(target))
		print("*" * 70)
		print()

		for port in range(1, 65535):
			socks = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
			socket.setdefaulttimeout(1)
			result = socks.connect_ex((target, port))
			if result == 0:
				print("    Found open port {}".format(port))
			socks.close()

	except KeyboardInterrupt:
		print("\n\nProgram stopped")
		sys.exit()
	except NameError:
		print("\nError in target declaration")
		sys.exit()
	except socket.gaierror:
		print("\nError in resolving hostname")
		sys.exit()
	except socket.error:
		print("\nTarget is unreachable")
		sys.exit()


if __name__ == '__main__':
	main()